const database = require('./database');



// function to get id from email
async function getUsernameByEmail(email){
    const sql = `
        SELECT 
            USERNAME
        FROM 
            USERS
        WHERE 
            EMAIL = :email
        `;
    const binds = {
        email : email
    }

    return (await database.execute(sql, binds, database.options)).rows;
}

// function to creat new user
// user should have handle, email, pass, dob
// {id} will be returned
async function createNewUser(user){
    const sql = `
        INSERT INTO
            USERS(username,NAME,EMAIL,phone, PASSWORD,SEX,IS_ADMIN)
        VALUES 
            (:username,:name,:email,:phone,:password,:sex,:is_admin)
    `;
    const binds = {
        name: user.name,
        email :user.email,
        phone:user.phone,
        password: user.password,
        sex: user.sex,
        username: user.username,
        is_admin:0
    }
    return await database.execute(sql, binds, {});
}